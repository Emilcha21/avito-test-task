# Avito Test Task

## Технологический стек
- **Язык программирования**: Go
- **База данных**: PostgreSQL  
- **ORM**: GORM
- **Веб-фреймворк**: Gin
- **Управление конфигурацией**: Viper
- **Документирование API**: Swaggo
- **Статический анализ**: Golangci-lint

## Запуск проекта

### Предварительные требования
- Установленный Docker и Docker Compose
- Файл окружения: `.env`

### Запуск
```bash
docker-compose up
```

После запуска:
- Сервер доступен на порту 8080
- База данных автоматически инициализируется с миграциями
- Swagger документация доступна по адресу: `http://localhost:8080/swagger/index.html`

### Аутентификация
Для доступа к защищенным endpoint'ам используйте заголовок:
```
Authorization: Bearer your_secret_token_here
```

## Добавления

В процессе анализа задания и OpenAPI-спецификации понял, что предусмотрено малое количество проверок ошибок и возможных случаев выполнения. Для более надежной и предсказуемой работы системы были реализовал следующие улучшения:

### Расширенная обработка ошибок
- Добавил дополнительные статусы ошибок для более детализированного информирования клиентов
- Реализовал единую систему валидации входящих запросов
- Внедрил стандартизированную структуру ответов об ошибках

### Документирование API
- Полностью описал API-документация с использованием Swagger
- Документировал все возможные коды ответов и форматы ошибок
- Добавил примеры запросов и ответов для каждого endpoint'а

### Система аутентификации
Для работы с защищенными endpoint'ами необходимо передавать токен в заголовке Authorization. Токен проверяется на соответствие значению из переменных окружения.

## Статический анализ кода (Дополнительное задание)

### Запуск линтера
```bash
golangci-lint run
```

*Для использования требуется заранее установленный пакет golangci-lint*

### Конфигурация линтера

**Безопасность и надежность**
- `gosec` - обнаружение уязвимостей безопасности
- `govet` - поиск подозрительных конструкций кода
- `staticcheck` - комплексный анализ багов и антипаттернов

**Обработка ошибок**
- `errcheck` - контроль обработки возвращаемых ошибок
- `err113` - правильное сравнение ошибок через errors.Is
- `errname` - соблюдение конвенций именования ошибок

**Качество кода**
- `gocyclo/cyclop` - контроль цикломатической сложности функций
- `lll` - ограничение длины строк
- `funcorder` - соблюдение порядка объявления методов

**Производительность**
- `sqlclosecheck` - проверка закрытия SQL-ресурсов
- `intrange` - оптимизация циклов через range
- `copyloopvar` - устранение избыточных копирований в циклах

**Предотвращение ошибок**
- `forcetypeassert` - безопасное приведение типов
- `mnd` - поиск "магических чисел"
- `nestif` - контроль глубины вложенности условий

**Дополнительные проверки**
- `asciicheck` - проверка на не-ASCII символы в идентификаторах
- `misspell` - поиск орфографических ошибок
- `godox` - отслеживание TODO-комментариев
- `loggercheck` - консистентность структурированного логирования